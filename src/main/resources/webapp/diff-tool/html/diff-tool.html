<link href='/polarion/diff-tool/ui/css/common.css' rel='stylesheet'>
<link href='/polarion/diff-tool/ui/generic/css/searchable-dropdown.css' rel='stylesheet'
      onload='import("/polarion/diff-tool/ui/js/modules/DiffTool.js")
                .then(module => new module.default({SOURCE_DOC_PARAMS}))
                .catch(console.error);'>

<div class="comparison form-wrapper">
    <div class="in-progress-overlay"><img src='/polarion/ria/images/progress.gif' alt=""/><span id="comparison-in-progress-message"></span></div>

    <p>
        Please select <strong>target</strong> document and its revision below preliminary selecting its project and space, to compare current document in selected revision with it.
        Additionally select which link role should be taken into account when determining counterpart work items as well as diffing configuration.
    </p>
    <div class='property-wrapper'>
        <input type='checkbox' id='compare-with-same-checkbox' />
        <label for='compare-with-same-checkbox'>Compare with another revision of the same document</label>
    </div>

    <div class='property-wrapper hide-when-comparing-same'>
        <label for='comparison-project-selector' class="fixed-width w-1">Project:</label>
        <select id='comparison-project-selector'>
            {PROJECT_OPTIONS}
        </select>
    </div>
    <div class='property-wrapper hide-when-comparing-same'>
        <label for='comparison-space-selector' class="fixed-width w-1">Space:</label>
        <select id='comparison-space-selector'>
        </select>
    </div>
    <div class='property-wrapper hide-when-comparing-same'>
        <label for='document-selector' class="fixed-width w-1">Document:</label>
        <select id='document-selector'>
        </select>
    </div>
    <div class='property-wrapper'>
        <label for="select-revision-panel" class="fixed-width w-1">Revision:</label>
        <div id="select-revision-panel">
            <div id="select-revision-radios">
                <input type="radio" id="revision-enter-manually" name="select-revision-type" value="manually" checked="checked">
                <label for="revision-enter-manually">Enter manually</label><br>
                <input type="radio" id="revision-select-from-list" name="select-revision-type" value="list">
                <label for="revision-select-from-list">Select from list</label><br>
            </div>

            <div id ="select-revision-manual-container">
                <input id="select-revision-manual-input" placeholder="leave empty to use latest revision" type="number"/>
            </div>

            <div id="select-revision-list-container" style="display: none;">
                <select id='revision-selector'></select>
                <div>
                    <input type="checkbox" id="baseline-checkbox" />
                    <label for="baseline-checkbox">show only baselines</label>
                </div>
            </div>
        </div>
    </div>
    <div class='property-wrapper hide-when-comparing-same'>
        <label for='comparison-link-role-selector' class="fixed-width w-1">Link role:</label>
        <select id='comparison-link-role-selector'>
            {LINK_ROLE_OPTIONS}
        </select>
    </div>
    <div class='property-wrapper'>
        <label for='comparison-config-selector' class="fixed-width w-1">Configuration:</label>
        <select id='comparison-config-selector'>
            {CONFIG_OPTIONS}
        </select>
    </div>
    <div class='property-wrapper'>
        <input type='checkbox' id='use-work-items-filter' />
        <label for='use-work-items-filter'>Use work items filter</label>
    </div>
    <div class='property-wrapper'>
        <div id="work-items-filter-pane" style="display: none; width: 100%">
            <div id="work-items-filter-radios">
                <input type="radio" id="include-work-items" name="work-items-filter-type" value="including">
                <label for="include-work-items">Only work items</label>
                <input type="radio" id="exclude-work-items" name="work-items-filter-type" value="excluding" checked="checked">
                <label for="exclude-work-items">Excluding work items</label>
            </div>

            <div id ="work-items-filter" style="margin: 5px 0 0 5px;">
                <input id="work-items-filter-input" placeholder="comma/space separated list of IDs" type="text" style="width: 100%;"/>
            </div>
        </div>
    </div>

    <div class='buttons-wrapper'>
        <button type='button' id="compare-documents" disabled>
            <img src='/polarion/ria/images/dle/operations/compare.png' alt=""/>Compare
        </button>
    </div>
    <div class="alert alert-error"></div>
    <div class="alert alert-warning"></div>
</div>
